{% extends "layout.html" %}

{% block main %}
<div class="main-layout-container">
    <!-- To-Do  list container with a seperate container featuring the Quotes to motivate user -->
    <div class="todo-container">
        <div class="todo-header">
            <h4 class="todo-title">To-Do List</h4>
        </div>

        <ul id="todo-list" class="todo-list"></ul>

        <div class="todo-input-container">
            <input type="text" id="new-task-input" placeholder="Add a new task..." class="todo-input">
            <button id="add-task-btn" class="todo-add-btn">+</button>
        </div>

       <!-- Quotes (Help by AI to correctly format it) -->
        <div class="quotes-container">
            <p class="random-quote" id="random-quote"></p>
            <p class="quote-author" id="quote-author"></p>
        </div>
    </div>


    <div class="main-content-column">
        <!-- Main Content ft. the Pomodoro Timer-->
        <div class="centered-content">
            <p>locktf - no bs</p>
            <p>Current time: <span id="clock"></span></p>
            <p>Day progress: <span id="progress"></span>%</p>
        </div>

        <div id="pomodoro-timer">
            <div class="timer-display" id="timer-display">25:00</div>
            <div class="timer-controls">
                <button id="start-btn">Start</button>
                <button id="pause-btn">Pause</button>
                <button id="reset-btn">Reset</button>
            </div>
            <svg class="progress-ring" width="100" height="100">
                <circle class="progress-ring-background" stroke="#333" stroke-width="8" fill="transparent" r="40" cx="50" cy="50"/>
                <circle class="progress-ring-circle" stroke="#FFFFFF" stroke-width="8" fill="transparent" r="40" cx="50" cy="50"/>
            </svg>
        </div>
    </div>
</div>

    <!-- Math Snippet with the help of Stack overflow (https://stackoverflow.com/questions/28415178/how-do-you-show-the-current-time-on-a-web-page/28415797#28415797) -->
<script>
(function () {

  var clockElement = document.getElementById( "clock" );

  function updateClock ( clock ) {
    clock.innerHTML = new Date().toLocaleTimeString();
  }

  setInterval(function () {
      updateClock( clockElement );
  }, 1000);

}());

(function () {
  const progressElement = document.getElementById("progress");

  function updateDayProgress() {
    const now = new Date();
    const secondsPassed = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
    const totalSeconds = 24 * 3600;
    const percent = ((secondsPassed / totalSeconds) * 100).toFixed(0); // keep 2 decimals
    progressElement.textContent = percent;
  }

  // Update once per second
  setInterval(updateDayProgress, 1000);
  updateDayProgress();
}());
</script>
<!-- Referencing the big scripts -->
<script src="{{ url_for('static', filename='pomodoro.js') }}"></script>
<script src="{{ url_for('static', filename='todoandquotes.js') }}"></script>
{% endblock %}

